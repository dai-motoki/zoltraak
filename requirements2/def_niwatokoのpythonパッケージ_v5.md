None

# 要件定義書

## ゴール
niwatokoという自然言語でプログラムを行うことのできるプログラミング言語のpythonパッケージを作成する。

## 1. 目的
このシステムの目的は、niwatokoという自然言語でプログラミングを行うことができるpythonパッケージを開発することです。これにより、プログラミングに慣れていない人でも、自然言語を使ってプログラムを記述できるようになります。

## 2. ファイル・フォルダ構成
```
niwatoken/
├── __init__.py
├── parser.py
├── interpreter.py
├── ast.py
├── token.py
└── exceptions.py
```

## 3. クラス図
```
+--------------+        +-------------+
|   Parser     |        |  Interpreter|
+--------------+        +-------------+
| - tokens     |        | - ast        |
| + parse()    |        | + run()      |
+--------------+        +-------------+
        ^                       ^
        |                       |
+---------------+    +---------------+
|     AST       |    |     Token     |
+---------------+    +---------------+
| - nodes       |    | - type        |
| + visit()     |    | - value       |
+---------------+    +---------------+
        ^                       ^
        |                       |
+---------------+    +---------------+
|  ASTNode      |    | TokenType    |
+---------------+    +---------------+
| - type        |    | - IDENTIFIER |
| - value       |    | - NUMBER     |
+---------------+    | - STRING     |
                     | - OPERATOR   |
                     | - KEYWORD    |
                     +---------------+
```

## 4. クラスの詳細

### Parser
- **説明**: niwatokoの文法をパースし、抽象構文木(AST)を生成するクラス
- **属性**:
  - `tokens`: トークンのリスト
- **操作**:
  - `parse()`: トークンのリストを受け取り、ASTを生成する

### Interpreter
- **説明**: ASTを解釈し、プログラムを実行するクラス
- **属性**:
  - `ast`: 抽象構文木
- **操作**:
  - `run()`: ASTを受け取り、プログラムを実行する

### AST
- **説明**: 抽象構文木を表すクラス
- **属性**:
  - `nodes`: ASTノードのリスト
- **操作**:
  - `visit(node)`: ASTノードを訪問し、ノードの型に応じた処理を行う

### ASTNode
- **説明**: ASTの個々のノードを表すクラス
- **属性**:
  - `type`: ノードの型
  - `value`: ノードの値
- **操作**:
  なし

### Token
- **説明**: niwatokoのトークンを表すクラス
- **属性**:
  - `type`: トークンの型
  - `value`: トークンの値

### TokenType
- **説明**: トークンの型を表す列挙型
- **属性**:
  - `IDENTIFIER`
  - `NUMBER`
  - `STRING`
  - `OPERATOR`
  - `KEYWORD`

## 4. ユースケース
1. **niwatokoプログラムの入力**: ユーザーがniwatokoのプログラムを入力する
2. **構文解析**: Parserクラスが入力プログラムをパースし、ASTを生成する
3. **プログラム実行**: Interpreterクラスが生成されたASTを実行し、出力を生成する
4. **出力表示**: ユーザーに実行結果を表示する

関連するクラスとメソッド:
- `Parser.parse()`: niwatokoプログラムをパースしASTを生成する
- `Interpreter.run()`: ASTを解釈し、プログラムを実行する

## 5. シーケンス図

### ユースケース1: niwatokoプログラムの入力
```
+----------+    +----------+    +----------+
|  ユーザー |    |  Parser  |    |Interpreter|
+----------+    +----------+    +----------+
     |                |               |
     | niwatokoプログラム入力 |       |
     |------------------>|               |
     |                |               |
     |                | parse()       |
     |                |-------------->|
     |                |               |
     |                |      AST      |
     |                |<--------------|
     |                |               |
     |                |               | run(AST)
     |                |               |-------------->
     |                |               |
     |                |               |     出力
     |                |               |<------------
     |      出力      |               |
     |<---------------|               |
     |                |               |
     +----------+    +----------+    +----------+
```

### ユースケース2: niwatokoプログラムの実行
```
+----------+    +----------+    +----------+
|  ユーザー |    |  Parser  |    |Interpreter|
+----------+    +----------+    +----------+
     |                |               |
     | niwatokoプログラム入力 |       |
     |------------------>|               |
     |                |               |
     |                | parse()       |
     |                |-------------->|
     |                |               |
     |                |      AST      |
     |                |<--------------|
     |                |               |
     |                |               | run(AST)
     |                |               |-------------->
     |                |               |
     |                |               |     出力
     |                |               |<------------
     |      出力      |               |
     |<---------------|               |
     |                |               |
     +----------+    +----------+    +----------+
```