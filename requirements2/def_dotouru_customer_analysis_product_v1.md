# Streamlit 簡易アプリの要件定義書
## ゴール: ドトール顧客分析プロダクトv1 Streamlit の簡易アプリをローカルに作る

## 1. 目的
ドトール顧客分析プロダクトv1上記のゴールを満たすStreamlitアプリケーションの要件定義を記述する:
    - ペルソナ
        - 企業の経営企画部門に所属する40代男性
        - ドトールコーヒーの顧客分析に興味がある
        - Pythonプログラミングの基本的な知識がある
    - ユーザーストーリー
        - 企画部門の担当者として、ドトールコーヒーの顧客の傾向を把握したい
        - 顧客の属性データを可視化して、分析結果を経営層に報告したい
        - 直感的に操作でき、手軽に使えるツールが欲しい

## 2. ファイル・フォルダ構成
```
.
├── app.py
├── utils.py
├── templates/
│   ├── header.py
│   ├── sidebar.py
│   └── footer.py
├── data/
│   └── sample_data.csv
└── requirements.txt
```

## 4. Streamlitコンポーネント
- `st.sidebar.selectbox()`: ユーザーが分析対象の属性を選択できるドロップダウンメニュー
- `st.bar_chart()`: 選択した属性ごとの顧客数を棒グラフで表示
- `st.line_chart()`: 時系列データの推移を折れ線グラフで表示
- `st.dataframe()`: 元のデータセットをテーブル形式で表示

## 5. データの流れ
1. ユーザーが`sidebar.selectbox()`で分析対象の属性を選択
2. `utils.py`の関数を呼び出し、選択された属性に基づいて集計・分析を実行
3. 分析結果を`st.bar_chart()`、`st.line_chart()`、`st.dataframe()`で可視化して表示

## 6. ユーザーインターフェース
![アプリケーションの画面遷移図](transition_diagram.png)

メイン画面では、ユーザーが`sidebar.selectbox()`で分析対象の属性を選択すると、その属性に基づいた分析結果が表示される。
各グラフやテーブルにはインタラクティブな操作が可能で、ユーザーが探索的な分析を行えるようにする。

## 7. 開発環境
- Python 3.9
- Streamlit 1.11.0
- Pandas 1.3.5
- Matplotlib 3.5.1
- venv 仮想環境を使用

## 8. テスト
- ユニットテストの方針
    - `utils.py`の主要な関数について、正常系と異常系のテストケースを用意
    - Streamlitコンポーネントの表示内容が期待通りかを確認
- テストデータ
    - `data/sample_data.csv`に用意したサンプルデータを使用
    - 実際のデータ量や分布を反映したテストデータを準備